<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Firebase Setup â€” ×“×” ×•×™× ×¦'×™</title>
<link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;600;700&display=swap" rel="stylesheet">
<style>
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:'Heebo',sans-serif;background:#09090b;color:#f0ead8;min-height:100vh;padding:30px 20px;direction:rtl}
.wrap{max-width:580px;margin:0 auto;display:flex;flex-direction:column;gap:20px}
h1{font-size:24px;font-weight:700;color:#c9a84c;text-align:center;margin-bottom:4px}
.sub{text-align:center;color:#a89878;font-size:13px}
.card{background:#111214;border:1px solid rgba(201,168,76,.28);border-radius:12px;padding:24px;display:flex;flex-direction:column;gap:14px}
.card h2{font-size:15px;font-weight:700}
.fg{display:flex;flex-direction:column;gap:5px}
label{font-size:11px;font-weight:600;color:#a89878}
input{background:#1c1e22;border:1px solid #242629;border-radius:8px;padding:10px 12px;color:#f0ead8;font-family:inherit;font-size:13px;direction:ltr;outline:none;width:100%}
input:focus{border-color:rgba(201,168,76,.5)}
.btn{background:#c9a84c;color:#09090b;border:none;padding:13px;border-radius:8px;font-size:14px;font-weight:700;cursor:pointer;font-family:inherit;width:100%}
.btn:hover{background:#e2c06a}
.btn:disabled{opacity:.5;cursor:not-allowed}
.log{background:#0a0a0b;border:1px solid #242629;border-radius:8px;padding:14px;font-size:12px;font-family:monospace;line-height:2;min-height:140px;direction:ltr;text-align:left;overflow-y:auto;max-height:300px}
.done{background:rgba(76,175,122,.06);border:1px solid rgba(76,175,122,.3);border-radius:10px;padding:16px;text-align:center;display:none}
.done h3{color:#4caf7a;font-size:16px;margin-bottom:6px}
.done p{color:#a89878;font-size:12px;line-height:1.7}
table{width:100%;border-collapse:collapse;font-size:12px}
th{background:#1c1e22;color:#5c5444;padding:8px 10px;text-align:right;font-size:10px;text-transform:uppercase}
td{padding:8px 10px;border-bottom:1px solid rgba(255,255,255,.04);color:#a89878}
td:first-child{color:#f0ead8;font-weight:600}
.p{display:inline-block;padding:2px 9px;border-radius:20px;font-size:10px;font-weight:700}
.ps{background:rgba(224,82,82,.12);color:#e05252;border:1px solid rgba(224,82,82,.3)}
.pa{background:rgba(201,168,76,.12);color:#c9a84c;border:1px solid rgba(201,168,76,.3)}
.pg{background:rgba(91,142,240,.1);color:#5b8ef0;border:1px solid rgba(91,142,240,.2)}
</style>
</head>
<body>
<div class="wrap">
  <h1>ğŸ”¥ Firebase Setup â€” ×“×” ×•×™× ×¦'×™</h1>
  <p class="sub">×”×’×“×¨×” ××•×˜×•××˜×™×ª ×—×“ ×¤×¢××™×ª</p>

  <div class="card">
    <h2>×¤×¨×˜×™ Firebase (×›×‘×¨ ××•×œ××•)</h2>
    <div class="fg"><label>API Key</label><input id="apiKey" value="AIzaSyBfnYW-d4UFVvuqdxCLk_autpWmOLL2zFo"></div>
    <div class="fg"><label>Project ID</label><input id="projectId" value="leonrdi-de-vinhi"></div>
  </div>

  <div class="card">
    <h2>×¡×™×¡×××•×ª</h2>
    <div class="fg"><label>×× ×”×œ×™× (admin1, admin2, admin3)</label><input id="adminPass" value="admin1234"></div>
    <div class="fg"><label>×©×•××¨×™× (lobby1, lobby2)</label><input id="lobbyPass" value="lobby1234"></div>

    <table>
      <thead><tr><th>××™××™×™×œ</th><th>×ª×¤×§×™×“</th></tr></thead>
      <tbody>
        <tr><td>admin1@davinci.com</td><td><span class="p pa">×× ×”×œ</span></td></tr>
        <tr><td>admin2@davinci.com</td><td><span class="p pa">×× ×”×œ</span></td></tr>
        <tr><td>admin3@davinci.com</td><td><span class="p pa">×× ×”×œ</span></td></tr>
        <tr><td>lobby1@davinci.com</td><td><span class="p pg">×©×•××¨</span></td></tr>
        <tr><td>lobby2@davinci.com</td><td><span class="p pg">×©×•××¨</span></td></tr>
      </tbody>
    </table>
  </div>

  <div class="card">
    <button class="btn" id="runBtn">ğŸš€ ×”×ª×—×œ ×”×’×“×¨×” ××•×˜×•××˜×™×ª</button>
    <div class="log" id="log">×××ª×™×Ÿ...</div>
    <div class="done" id="done">
      <h3>âœ… ×”×•×©×œ×!</h3>
      <p>×›×œ ×”××©×ª××©×™× × ×•×¦×¨×• ×‘×”×¦×œ×—×”.<br>×›× ×™×¡×” ×œ×× ×”×œ: admin1@davinci.com / admin1234<br>×›× ×™×¡×” ×œ×©×•××¨: lobby1@davinci.com / lobby1234</p>
    </div>
  </div>
</div>

<script type="module">
import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js';
import { getAuth, createUserWithEmailAndPassword, signOut } from 'https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js';
import { getFirestore, doc, setDoc } from 'https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js';

function log(msg, color) {
  const el = document.getElementById('log');
  const c = {g:'#4caf7a', r:'#e05252', y:'#a89878', gold:'#c9a84c'};
  el.innerHTML += '<span style="color:' + (c[color]||'#f0ead8') + '">' + msg + '</span>\n';
  el.scrollTop = el.scrollHeight;
}

document.getElementById('runBtn').addEventListener('click', async function() {
  const apiKey = document.getElementById('apiKey').value.trim();
  const projectId = document.getElementById('projectId').value.trim();
  const adminPass = document.getElementById('adminPass').value.trim();
  const lobbyPass = document.getElementById('lobbyPass').value.trim();

  if (!apiKey || !projectId) { log('âŒ ×—×¡×¨×™× ×¤×¨×˜×™ Firebase', 'r'); return; }
  if (adminPass.length < 6 || lobbyPass.length < 6) { log('âŒ ×¡×™×¡××” ×§×¦×¨×” ××“×™ (××™× ×™××•× 6 ×ª×•×•×™×)', 'r'); return; }

  this.disabled = true;
  document.getElementById('log').innerHTML = '';

  let app, auth, db;
  try {
    log('ğŸ”§ ××ª×—×‘×¨ ×œ-Firebase...', 'y');
    app = initializeApp({ apiKey, authDomain: projectId + '.firebaseapp.com', projectId }, 'setup' + Date.now());
    auth = getAuth(app);
    db = getFirestore(app);
    log('âœ“ ××—×•×‘×¨!', 'g');
  } catch(e) {
    log('âŒ ×©×’×™××ª ×—×™×‘×•×¨: ' + e.message, 'r');
    this.disabled = false;
    return;
  }

  const users = [
    { email: 'admin1@davinci.com', pass: adminPass, role: 'admin', name: '×× ×”×œ 1' },
    { email: 'admin2@davinci.com', pass: adminPass, role: 'admin', name: '×× ×”×œ 2' },
    { email: 'admin3@davinci.com', pass: adminPass, role: 'admin', name: '×× ×”×œ 3' },
    { email: 'lobby1@davinci.com', pass: lobbyPass, role: 'guard', name: '×œ×•×‘×™ 1' },
    { email: 'lobby2@davinci.com', pass: lobbyPass, role: 'guard', name: '×œ×•×‘×™ 2' },
  ];

  let ok = 0, fail = 0;
  for (const u of users) {
    log('â³ ' + u.email + '...', 'y');
    try {
      const cred = await createUserWithEmailAndPassword(auth, u.email, u.pass);
      await setDoc(doc(db, 'users', cred.user.uid), { email: u.email, role: u.role, name: u.name });
      await signOut(auth);
      log('âœ“ ' + u.email, 'g');
      ok++;
    } catch(e) {
      if (e.code === 'auth/email-already-in-use') {
        log('âš ï¸ ×›×‘×¨ ×§×™×™×: ' + u.email, 'gold');
        ok++;
      } else {
        log('âŒ ' + u.email + ': ' + e.message, 'r');
        fail++;
      }
    }
    await new Promise(r => setTimeout(r, 400));
  }

  log('', '');
  log('ğŸ‰ ×”×•×©×œ×! ' + ok + ' ××©×ª××©×™× ××•×›× ×™×.', 'g');
  if (fail === 0) document.getElementById('done').style.display = 'block';
  this.disabled = false;
});
</script>
</body>
</html>
